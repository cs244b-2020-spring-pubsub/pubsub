syntax = "proto3";

option go_package = "proto;pubsub";

package pubsub;

// PubSub service defination
service PubSub {
  // Publish a message
  rpc publish(PublishRequest) returns (PublishResponse) {}

  // Subscribe a topic
  rpc subscribe(SubscribeRequest) returns (stream SubscribeResponse) {}
}

// The request message for publish
message PublishRequest { string topic = 1; }

// The response message for publish
message PublishResponse {
  enum PublishStatus {
    OK = 0;
    CHANNEL_EXISTS = 1;
    UNKNOWN_FAILURE = 2;
  }
  PublishStatus status = 1;
}

// The request message for subscribe
message SubscribeRequest { repeated string topic = 1; }

// The response message for subscribe
message SubscribeResponse {
  string id = 1;
  string content = 2;
}
